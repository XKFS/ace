using System;
using System.Runtime.CompilerServices;

namespace Ace
{
namespace Core
{
public abstract class Component : NativeObject
{
    public Entity owner { get; internal set; }

    private bool cacheDirty = true;
    private TransformComponent cachedTransform = null;
    public TransformComponent transform
    {
        get
        {
            if(cacheDirty)
            {
                cacheDirty = false;
                cachedTransform = owner.transform;
            }
            return cachedTransform;
        }
    }


    public override bool IsValid()
    {
        if(!owner.IsValid())
        {
            return false;
        }
        return owner.HasComponent(GetType());
    }


    private void internal_n2m_set_entity(uint id)
    {
        owner = new Entity(id);
        cacheDirty = true;
    }

}

}
}


